auto.waitFor(),images.requestScreenCapture(),sleep(300);var sell=require("\u5356\u88C5\u5907.js"),xoff=leftBlack()-246,storage=storages.create("pref"),flag=!0,partflag=!0,parttype=storage.get("partflag5",!1),speedtype=storage.get("speedtype",0),speedflag=!0,autoflag=!0,autotype=2,teamflag=!0,teamtype=storage.get("teamtype2",1),teamregion=[269+xoff,166,16,16],teamx=43,overtimeflag=!0,equipflag=storage.get("equipflag",!0),designflag=storage.get("designflag",!1),rareflag=!0,sellflag=!1,bonusflag=storage.get("partflag5",!1),time=new Date,timeflag=storage.get("timeflag10",!1),timelimit=1e3*(60*(60*parseInt(storage.get("hour10",0))+parseInt(storage.get("minute10",0)))),recoverflag=storage.get("recoverflag9",!1),usediamond=storage.get("usediamond9",!1);timeflag&&threads.start(function(){setInterval(function(){new Date-time>timelimit&&exit()},6e4)}),threads.start(function(){for(sleep(111);;){var b=images.read("./reline.jpg");if(flag){flag=!1;try{var c=images.findImageInRegion(captureScreen(),b,1442+xoff,710,87,41)}catch(g){flag=!0;continue}flag=!0}if(b.recycle(),!c)log("not found reline");else{log(c),click(c.x,c.y),log("open reline"),sleep(2e3);var d=images.read("./error.jpg");if(flag){flag=!1;var e=images.findImageInRegion(captureScreen(),d,1105+xoff,517,56,56);flag=!0}if(d.recycle(),!e)log("not found error");else{for(log(e),click(e.x,e.y),log("click error");;){if(flag){flag=!1;try{var f=images.detectsColor(captureScreen(),"#7ae6f4",2094+xoff,78,thresholdd=15)}catch(g){flag=!0;continue}flag=!0}if(!f)click(1112+xoff,512),sleep(2e3);else break}engines.execSciptFile("./\u79EF\u5206.js"),exit()}}sleep(9999)}});start:for(;;){for(;;){var questImg=images.read("./quest.jpg");if(flag){flag=!1;try{var quest=images.findImageInRegion(captureScreen(),questImg,1869+xoff,972,137,65)}catch(b){flag=!0;continue}flag=!0}if(questImg.recycle(),!quest)log("not found quest"),back();else{log(quest),click(quest.x,quest.y),log("open quest");break}sleep(1500)}for(sleep(1e3),click(1927+xoff,863),sleep(3e3);;){if(flag){flag=!1;var evenoff=images.findMultiColors(images.captureScreen(),"#49c0c0",[[-18,-19,"#49c0c0"],[58,28,"#49c0c0"]],{region:[2105+xoff,182,6,6]});flag=!0}if(!evenoff)log("not found evenoff"),click(1958+xoff,923);else{log(evenoff),log("found evenoff");break}sleep(1e3)}sleep(1e3);rare:for(;;){for(;;){if(flag){flag=!1;var evenoff=images.findMultiColors(images.captureScreen(),"#49c0c0",[[-18,-19,"#49c0c0"],[58,28,"#49c0c0"]],{region:[2105+xoff,182,6,6]});flag=!0}if(evenoff)break;else sleep(300)}if(flag){flag=!1;var questbottom=images.detectsColor(captureScreen(),"#88dddd",2130+xoff,987);flag=!0}if(questbottom)for(;!images.detectsColor(captureScreen(),"#88dddd",2130+xoff,232);)click(2130+xoff,232),sleep(800);if(equipflag){var equiprareImg=images.read("./equiprare.jpg");if(flag){flag=!1;var equiprare=images.findImageInRegion(captureScreen(),equiprareImg,1602+xoff,331,47,42);flag=!0}if(equiprareImg.recycle(),!equiprare)log("not found equiprare");else if(images.findColorInRegion(captureScreen(),"#ffffff",1602+xoff,331,47,42,1)){for(;!click(equiprare.x,equiprare.y););if(log("open equiprare"),battleprc(partflag,!1,speedflag,2,!1,autotype,!1,teamtype,overtimeflag,!1,!0),sellflag){sellflag=!1;continue start}continue rare}}if(designflag){var designrareImg=images.read("./designrare.jpg");if(flag){flag=!1;var designrare=images.findImageInRegion(captureScreen(),designrareImg,1602+xoff,334,47,42);flag=!0}if(designrareImg.recycle(),!designrare)log("not found designrare");else if(images.findColorInRegion(captureScreen(),"#ffffff",1602+xoff,331,47,42,1)){for(;!click(designrare.x,designrare.y););if(log("open designrare"),battleprc(partflag,parttype,speedflag,2,!1,autotype,!1,teamtype,overtimeflag,!1,!0),sellflag){sellflag=!1;continue start}continue rare}}var riskyImg=images.read("./risky.jpg");if(flag){flag=!1;var risky=images.findImageInRegion(captureScreen(),riskyImg,1506+xoff,328,45,675);flag=!0}if(riskyImg.recycle(),!risky){if(log("not found risky"),flag){flag=!1;var pullbar=images.findColorInRegion(captureScreen(),"#88dddd",2126+xoff,232,5,690);flag=!0}pullbar&&swipe(pullbar.x,pullbar.y+10,pullbar.x,pullbar.y+100,200)}else{for(;!click(risky.x,risky.y););if(log("open risky"),battleprc(partflag,parttype,speedflag,speedtype,autoflag,autotype,teamflag,teamtype,!1,rareflag,!1),sellflag){sellflag=!1;continue start}continue rare}sleep(800)}}function battleprc(b,c,d,e,f,g,h,i,j,k,l){re:for(;;){if(flag){flag=!1;var m=images.findColorInRegion(captureScreen(),"#ffffcc",1805+xoff,238,10,6);flag=!0}if(!!m){if(log("found simple"),h){if(global.teamflag=!1,h=!1,flag){for(flag=!1;!images.findColorInRegion(captureScreen(),"#ffffff",teamregion[0]+teamx*i,teamregion[1],teamregion[2],teamregion[3]);)click(258+xoff,582),sleep(500);flag=!0}log("\u961F\u4F0D\u8BBE\u7F6E\u6210\u529F")}if(d){if(d=!1,flag){switch(flag=!1,e){case 0:for(;!images.detectsColor(captureScreen(),"#ffffff",1489+xoff,1009,threshold=20);)click(1371+xoff,964),sleep(400);log("\u8C03\u901F\u4E3A1x");break;case 1:for(;!images.detectsColor(captureScreen(),"#e85533",1570+xoff,1017,threshold=20);)click(1371+xoff,964),sleep(400);log("\u8C03\u901F\u4E3A2x");break;case 2:for(;!images.detectsColor(captureScreen(),"#f85533",1558+xoff,1014,threshold=20);)click(1371+xoff,964),sleep(400);log("\u8C03\u901F\u4E3A3x");}flag=!0}log("\u8C03\u901F\u6210\u529F")}if(press(1798+xoff,999,1),log("open battle"),j)for(log("\u68C0\u6D4B\u526F\u672C\u8D85\u65F6\u4E2D");;)if(flag)if(flag=!1,images.findColorInRegion(captureScreen(),"#888888",1888+xoff,998,5,3)){for(back(),log("\u5DF2\u8D85\u65F6");!images.findMultiColors(images.captureScreen(),"#49c0c0",[[-18,-19,"#49c0c0"],[58,28,"#49c0c0"]],{region:[2105+xoff,182,6,6]});)sleep(1e3);flag=!0;break re}else{log("\u672A\u8D85\u65F6"),flag=!0;break}var q=threads.disposable(),r=threads.start(function(){for(var B=new Date;5e3>new Date-B;){if(flag){flag=!1;var C=images.detectsColor(captureScreen(),"#ff5533",1609+xoff,137);flag=!0}if(!C)log("ap enough");else if(s.interrupt(),recoverflag){for(log(C),usediamond?click(1624+xoff,439):click(1639+xoff,592),log("clicked use");;){if(flag){flag=!1;var D=images.detectsColor(captureScreen(),"#ff5533",1255+xoff,818,threshold=16);flag=!0}if(!D)5e3<new Date-B&&(log("\u836F\u5403\u5B8C\u7ED3\u675F\u811A\u672C"),exit());else break;sleep(199)}for(;!click(1759+xoff,530);)log("clicked max");for(;!click(1442+xoff,838);)log("clicked recover");q.setAndNotify("re"),r.interrupt()}else back(),sleep(500),back(),exit();sleep(497)}q.setAndNotify("null")}),s=threads.start(function(){var B=new Date;for(sleep(3);5e3>new Date-B;){if(flag){flag=!1;var C=images.findMultiColors(captureScreen(),"#ffffff",[[-647,94,"#88dddd"],[-647,-480,"#88dddd"],[747,-481,"#88dddd"],[747,94,"#88dddd"]]);flag=!0}C&&(r.interrupt(),click(C.x,C.y),C=void 0,log("close pop"),sleep(200),q.setAndNotify("break"),log("\u8D85\u65F6\u7EBF\u7A0B\u7ED3\u675F1"),s.interrupt()),log("not found pop"),sleep(597)}q.setAndNotify("null"),log("\u8D85\u65F6\u7EBF\u7A0B\u7ED3\u675F2")});if("re"==q.blockedGet()){bonusflag=storage.get("partflag5",!1);continue re}else if("break"==q.blockedGet())break re;for(sleep(1e3);;){if(flag){flag=!1;var t=images.findMultiColors(captureScreen(),"#ffffff",[[-68,96,"#598ad9"],[-42,135,"#60c160"]],{threshold:15});flag=!0}if(!t)log("not found esc"),click(345+xoff,353);else{if(log(t),log("found esc"),f){switch(global.autoflag=!1,f=!1,g){case 0:var u=images.read("./still.jpg");break;case 1:var u=images.read("./autoskill.jpg");break;default:var u=images.read("./autoskill.jpg");}if(flag){for(flag=!1;!images.findImageInRegion(captureScreen(),u,1700+xoff,50,153,36);)click(1786+xoff,68),sleep(500);flag=!0}u.recycle(),log("\u4EBA\u7269\u72B6\u6001\u8BBE\u7F6E\u5B8C\u6210")}for(sleep(4e3);;){if(flag){flag=!1;var v=images.findMultiColors(captureScreen(),"#ffffff",[[-174,24,"#ff6840"],[208,17,"#ff6840"],[-449,-160,"#ff5533"],[454,-154,"#ff5533"],[-681,-534,"#88dddd"],[706,-536,"#88dddd"]]);flag=!0}if(v){for(stuckthread.interrupt(),log(v),click(v.x,v.y),sleep(3e3),click(2043+xoff,68),sleep(3e3);!sell(););sellflag=!0;break re}if(flag){flag=!1;var w=images.findMultiColors(captureScreen(),"#ffffff",[[21,5,"#ffffff"],[-149,-993,"#ffff22"],[-2,-962,"#ffff22"]]);flag=!0}if(!w)log("not found next"),press(1790+xoff,186,1),press(1892+xoff,186,1);else{if(log("found next"),b){if(sleep(100),c){if(flag){for(flag=!1;!images.detectsColor(captureScreen(),"#88dddd",647+xoff,1037);)click(699+xoff,978),sleep(100);flag=!0}log("\u52A9\u6218\u5F00\u542F")}else{if(flag){for(flag=!1;!images.detectsColor(captureScreen(),"#666666",598+xoff,1037);)click(699+xoff,978),sleep(100);flag=!0}log("\u52A9\u6218\u5173\u95ED")}b=!1}if(sleep(13),k){if(flag){flag=!1;var z=images.findMultiColors(images.captureScreen(),"#ff5533",[[-180,-965,"#ffff22"],[-33,-934,"#ffff22"]]);flag=!0}if(z){click(z.x,z.y);break re}else{press(1156+xoff,1006,1),log("restart battle"),bonusflag=storage.get("partflag5",!1);continue re}}if(press(1156+xoff,1006,1),l){for(var B=new Date;1e3>new Date-B;){if(flag){flag=!1;var A=images.findMultiColors(captureScreen(),"#ffffcc",[[26,6,"#ffffcc"],[74,7,"#ffffcc"],[-21,10,"#ff5533"]],{region:[920+xoff,947,90,30],threshold:15});flag=!0}if(A){click(A.x,A.y+random(12,15)),A=null,bonusflag=storage.get("partflag5",!1);continue re}sleep(50)}log("rare end"),click(w.x,w.y),w=null;break re}bonusflag=storage.get("partflag5",!1);continue re}sleep(300)}}sleep(300)}}else if(log("not found simple"),!equiprare&&bonusflag){if(flag){flag=!1;var n=images.findMultiColors(captureScreen(),"#95eaea",[[-15,-9,"#aaeeee"],[25,168,"#fff721"]],{threshold:15});flag=!0}if(!n){if(flag){flag=!1;var o=images.detectsColor(captureScreen(),"#88dddd",2098+xoff,887);flag=!0}if(o)click(498+xoff,882);else{if(flag){flag=!1;var p=images.findColorInRegion(captureScreen(),"#88dddd",2097+xoff,161,5,600);flag=!0}p&&swipe(p.x,p.y+10,p.x,p.y+180,200)}}else click(n.x+random(5,10),n.y+random(5,10)),bonusflag=!1,log("\u52A9\u6218 \u9009\u62E9\u5B8C\u6210"),n=void 0}else click(409+xoff,227);sleep(300)}}function leftBlack(){var b=images.captureScreen(),c=b.height,d=0,e=c/2;if(1920==b.width)return 0;for(;d<b.width-1;){if(b.pixel(d,e)!=b.pixel(d+1,e))return 0==d?d:d+1;d++}return d+1}
