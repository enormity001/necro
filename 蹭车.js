function raidprc(e,f,a,t,l,r,o,i,s,g){e:for(;;)switch(t){case 0:if(flag){flag=!1;var c=images.findMultiColors(captureScreen(),"#88dddd",[[280-a,0,"#88dddd"],[323,0,"#88dddd"],[536,-6,"#88dddd"],[632,-3,"#ffffff"],[903,-8,"#ffffff"],[1125,-3,"#88dddd"]]);flag=!0}if(!c){refresh();break}if(log(c),click(c.x,c.y),c=void 0,battle(),sellflag){sellflag=!1;break e}break;case 1:if(flag){flag=!1;var d=images.findMultiColors(captureScreen(),l,[[66,66,"#88dddd"],[345-a,66,"#88dddd"],[1243,-3,l]]);flag=!0}if(d){if(log(d),click(d.x,d.y),d=void 0,battle(),sellflag){sellflag=!1;break e}}else{if(optional){if(flag){flag=!1;var n=images.findMultiColors(captureScreen(),r,[[66,66,"#88dddd"],[345-a,66,"#88dddd"],[1243,-3,r]]);flag=!0}if(!n){refresh();break}if(log(n),click(n.x,n.y),n=void 0,battle(),sellflag){sellflag=!1;break e}}refresh()}break;case 2:if(flag){flag=!1;var d=images.findMultiColors(images.captureScreen(),l,[[-17,0,o],[345-a,66,"#88dddd"]]);flag=!0}if(d){if(click(d.x,d.y),log(d),d=void 0,battle(),sellflag){sellflag=!1;break e}break}if(optional){if(flag){flag=!1;var n=images.findMultiColors(images.captureScreen(),r,[[-17,0,i],[345-a,66,"#88dddd"]]);flag=!0}if(!n){refresh();break}if(log(n),click(n.x,n.y),n=void 0,battle(),sellflag){sellflag=!1;break e}}refresh()}}function battle(){e:for(;;){if(flag){flag=!1;var e=images.findColorInRegion(captureScreen(),"#ffffcc",1805+xoff,238,10,6);flag=!0}if(e){if(log("found simple"),e=void 0,teamflag){if(global.teamflag=!1,teamflag=!1,flag){for(flag=!1;!images.findColorInRegion(captureScreen(),"#ffffff",teamregion[0]+teamx*teamtype,teamregion[1],teamregion[2],teamregion[3]);)click(258+xoff,582),sleep(500);flag=!0}log("队伍设置成功")}click(1873+xoff,997),log("open battle");var f=threads.disposable(),a=threads.start(function(){for(var e=new Date;new Date-e<5e3;){if(flag){flag=!1;var r=images.detectsColor(captureScreen(),"#ff5533",1609+xoff,137);flag=!0}if(r)if(t.interrupt(),l.interrupt(),recoverflag){for(log(r),r=void 0,click(1639+xoff,592),log("clicked use");;){if(flag){flag=!1;var o=images.detectsColor(captureScreen(),"#ff5533",1255+xoff,818,threshold=16);flag=!0}if(o){o=void 0;break}new Date-e>5e3&&(log("药吃完结束脚本"),exit()),sleep(109)}click(1759+xoff,530),log("clicked max"),click(1442+xoff,838),log("clicked recover"),f.setAndNotify("re"),log("吃药线程结束1"),a.interrupt()}else back(),sleep(500),back(),exit();else log("ap enough");sleep(497)}f.setAndNotify("undefined"),log("吃药线程结束2")}),t=threads.start(function(){var e=new Date;for(sleep(2);new Date-e<5e3;){if(flag){flag=!1;var t=images.findMultiColors(captureScreen(),"#ffffff",[[68,147,"#ffffff"],[595,144,"#ffffff"],[613,-3,"#ffffff"],[825,-207,"#88dddd"],[-162,-206,"#88dddd"]]);flag=!0}if(t){for(a.interrupt(),l.interrupt(),log("found bug");!click(t.x,t.y););for(t=void 0;;){if(flag){flag=!1;var r=images.detectsColor(captureScreen(),"#7ae6f4",2094+xoff,78,thresholdd=15);flag=!0}if(r)break;click(1112+xoff,512),sleep(2e3)}engines.execScriptFile("./蹭车.js"),exit()}else log("not found bug"),sleep(391)}f.setAndNotify("undefined"),log("bug线程结束")}),l=threads.start(function(){var e=new Date;for(sleep(3);new Date-e<5e3;){if(flag){flag=!1;var r=images.findMultiColors(captureScreen(),"#ffffff",[[-644,-480,"#88dddd"],[-644,-480,"#88dddd"],[745,-480,"#88dddd"]],{region:[1148+xoff,710,116,41]});flag=!0}r&&(a.interrupt(),t.interrupt(),log(r),click(r.x,r.y),r=void 0,log("close pop"),sleep(200),f.setAndNotify("break"),log("满人线程结束1"),l.interrupt()),log("not found pop"),sleep(597)}f.setAndNotify("undefined"),log("满人线程结束2")});if("re"==f.blockedGet()){log("收到再次战斗信息");continue e}if("break"==f.blockedGet()){log("收到返回蹭车界面信息");break e}var r=!1;if(stuckorloseflag)var o=threads.start(function(){for(sleep(14999),log("卡死检测开始");;){if(flag){flag=!1;var e=captureScreen(),f=images.clip(e,1173,42,157,22);flag=!0}if(f){if(log("boss hp clipped down"),log("waitting...."),sleep(18003),flag){if(flag=!1,images.findImageInRegion(captureScreen(),f,1173+xoff,42,157,22,.9)){for(f.recycle(),i.interrupt(),r=!0,sleep(500),log("get stuck"),log("关闭团灭检测");!click(2066+xoff,90););for(var a=new Date;;){if(new Date-a>3500)break;if(images.detectsColor(captureScreen(),"#85dee1",1494+xoff,828,threshold=15)){for(;!click(1606+xoff,846););for(sleep(1500);!click(1375+xoff,721););log("卡死已退出"),sleep(500),r=!1,flag=!0,o.interrupt()}else sleep(297)}}flag=!0}log("not stuck"),sleep(3197)}}}),i=threads.start(function(){for(sleep(20009);;){if(flag){flag=!1;var e=images.findMultiColors(captureScreen(),"#ffffff",[[306,-2,"#ffffff"],[479,5,"#ffffff"],[-425,-185,"#88dddd"],[963,-185,"#88dddd"]]);flag=!0}if(e){for(e=void 0,r=!0,o.interrupt(),log("关闭卡死检测"),log("已团灭"),sleep(500);!click(767+xoff,734););for(;!click(767+xoff,734););log("团灭返回界面"),sleep(500),r=!1,i.interrupt()}else log("未团灭");sleep(8307)}});for(;;){if(guildflag){if(flag){flag=!1;var s=images.findMultiColors(captureScreen(),"#ffffff",[[-174,24,"#ff6840"],[208,17,"#ff6840"],[-449,-160,"#ff5533"],[454,-154,"#ff5533"],[-681,-534,"#88dddd"],[706,-536,"#88dddd"]]);flag=!0}if(s){for(log(s),click(s.x,s.y),s=void 0,sleep(2500),click(2043+xoff,68),sleep(2500);!sell(););return void(sellflag=!0)}log("not full")}if(flag){flag=!1;var g=images.findColorInRegion(captureScreen(),"#55bbcc",2036+xoff,248,5,5);flag=!0}if(g){g=void 0,stuckorloseflag&&(i.interrupt(),o.interrupt(),log("卡死线程结束"),log("团灭线程结束"));break e}log("not found refresh"),r||(press(1830+xoff,220,1),press(2103+xoff,865,1)),sleep(500)}}else log("not found simple");sleep(300)}}function refresh(){for(;;){if(flag){flag=!1;var e=images.findColorInRegion(captureScreen(),"#55bbcc",2036+xoff,248,5,5);flag=!0}if(e){click(e.x,e.y),e=void 0,log("has found refresh");break}log("not  found refresh and wait"),sleep(1500)}for(;;){if(flag){flag=!1;var f=images.findColorInRegion(captureScreen(),"#666666",2036+xoff,248,5,5);flag=!0}if(f){f=void 0,log("has found grefresh");break}log("not  found grefresh and wait"),sleep(20)}}function leftBlack(){for(var e=images.captureScreen(),f=e.height,a=0,t=f/2;a<e.width-1;){if(e.pixel(a,t)!=e.pixel(a+1,t))return 0==a?a:a+1;a++}return a+1}events.on("exit",function(){events.broadcast.emit("done",2)}),auto.waitFor(),images.requestScreenCapture(),sleep(300);var storage=storages.create("pref"),xoff=leftBlack()-246,flag=!0,teamregion=[269+xoff,166,16,16],teamx=43,sellflag=!1,guildflag=storage.get("guildflag",!1),Recoverflag=storage.get("Recoverflag",!1),stuckorloseflag=storage.get("stuckorloseflag",!1),sell=require("./卖装备.js");if(guildflag){var teamflag=storage.get("teamflag",!1),teamtype=storage.get("teamtype1",0),recoverflag=storage.get("recoverflag4",!1),raidmethod=storage.get("graidmethod",0),difficulty1=storage.get("gdifficulty1",0),difficulty2=storage.get("gdifficulty2",0),health=280*(1-storage.get("ghealth",0)/100),optional=storage.get("optional2",!1),bosstype1=storage.get("gbosstype1",0),bosstype2=storage.get("gbosstype2",0),timeflag=storage.get("timeflag4",!1),timelimit=60*(60*parseInt(storage.get("hour4",0))+parseInt(storage.get("minute4",0)))*1e3;switch(timeflag&&threads.start(function(){setInterval(function(){new Date-time>timelimit&&exit()},6e4)}),difficulty1){case 0:difficulty1="#ff0033";break;case 1:difficulty1="#aa66dd";break;case 2:difficulty1="#ff9955"}switch(difficulty2){case 0:difficulty2="ff0033";break;case 1:difficulty2="#aa66dd";break;case 2:difficulty2="#ff9955"}switch(bosstype1){case 0:bosstype1="#ffff88";break;case 1:bosstype1="#ff6666";break;case 2:bosstype1="#6699ff";break;case 3:bosstype1="#77ee77";break;case 4:bosstype1="#ee77ff";break;case 5:bosstype1="#999999"}switch(bosstype2){case 0:bosstype2="#ffff88";break;case 1:bosstype2="#ff6666";break;case 2:bosstype2="#6699ff";break;case 3:bosstype2="#77ee77";break;case 4:bosstype2="#ee77ff";break;case 5:bosstype2="#999999"}}else{var teamflag=storage.get("teamflag",!1),teamtype=storage.get("teamtype1",0),recoverflag=storage.get("recoverflag2",!1),raidmethod=storage.get("nraidmethod",0),difficulty1=storage.get("ndifficulty1",0),difficulty2=storage.get("ndifficulty2",0),health=280*(1-storage.get("nhealth",0)/100),optional=storage.get("optional1",!1),bosstype1=storage.get("nbosstype1",0),bosstype2=storage.get("nbosstype2",0),timeflag=storage.get("timeflag2",!1),timelimit=60*(60*parseInt(storage.get("hour2",0))+parseInt(storage.get("minute2",0)))*1e3,time=new Date;switch(timeflag&&threads.start(function(){setInterval(function(){new Date-time>timelimit&&exit()},6e4)}),difficulty1){case 0:case 1:difficulty1="#aa66dd"}switch(difficulty2){case 0:case 1:difficulty2="#aa66dd"}switch(bosstype1){case 0:bosstype1="#ffff88";break;case 1:bosstype1="#ff6666";break;case 2:bosstype1="#6699ff";break;case 3:bosstype1="#77ee77";break;case 4:bosstype1="#ee77ff"}switch(bosstype2){case 0:bosstype2="#ffff88";break;case 1:bosstype2="#ff6666";break;case 2:bosstype2="#6699ff";break;case 3:bosstype2="#77ee77";break;case 4:bosstype2="#ee77ff"}}for(Recoverflag&&(recoverflag=!1),storage.put("Recoverflag",!1),threads.start(function(){for(sleep(111);;){var e=images.read("/storage/emulated/0/reline.jpg");if(flag){flag=!1;try{var f=images.findImageInRegion(captureScreen(),e,1442+xoff,710,87,41)}catch(e){continue}flag=!0}if(e.recycle(),f){log(f),click(f.x,f.y),log("open reline"),f=void 0,sleep(2e3);var a=images.read("/storage/emulated/0/error.jpg");if(flag){flag=!1;var t=images.findImageInRegion(captureScreen(),a,1105+xoff,517,56,56);flag=!0}if(a.recycle(),t){for(log(t),click(t.x,t.y),log("click error");;){if(flag){flag=!1;try{var l=images.detectsColor(captureScreen(),"#7ae6f4",2094+xoff,78,thresholdd=15)}catch(e){flag=!0;continue}flag=!0}if(l)break;click(1112+xoff,512),sleep(2e3)}engines.execSciptFile("./蹭车.js"),exit()}else log("not found error")}else log("not found reline"),f=void 0;sleep(9999)}});;){for(;;){if(flag){flag=!1;var refreshbotton=images.findColorInRegion(captureScreen(),"#55bbcc",2036+xoff,248,5,5);flag=!0}if(refreshbotton){refresh(),refreshbotton=void 0;break}var helpImg=images.read("/storage/emulated/0/help.jpg");if(flag){flag=!1;try{var help=images.findImageInRegion(captureScreen(),helpImg,1187+xoff,261,36,34,.95)}catch(e){flag=!0;continue}flag=!0}if(helpImg.recycle(),help){log(help),click(help.x,help.y),log("open help"),help=void 0;break}log("not found help"),back(),sleep(2e3)}raidprc(teamflag,teamtype,health,raidmethod,difficulty1,difficulty2,bosstype1,bosstype2,recoverflag,guildflag)}